<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body {
            margin:0
        }
        canvas {
            display: block
        }
    </style>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/eventemitter2@6.4.9/lib/eventemitter2.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/roslib@1/build/roslib.min.js"></script>
    <script type="text/javascript">

        var ros_obj = new ROSLIB.Ros({
            url : 'ws://localhost:9090'
        })

        ros_obj.on('connection', function() {
            console.log('Connected to websocket server.');
        })
        ros_obj.on('error', function() {
            console.log('Error');
        })
        ros_obj.on('close', function(error) {
            console.log('Server closed')
        })

        var cmdVel = new ROSLIB.Topic({
            ros : ros_obj,
            name : '/cmd_vel',
            messageType : 'geometry_msgs/Twist'
        });

        var twist = new ROSLIB.Message({
            linear : {
                x : 0.1,
                y : 0.2,
                z : 0.3
            },
            angular : {
                x : -0.1,
                y : -0.2,
                z : -0.1
            }

        });
        cmdVel.publish(twist);
        

        
    </script>
    <title>webStick</title>
</head>
<body>
    
    <script>console.log(twist);</script>
    <div style="display:flex">
        x:
        <p id="x-vel" style="justify-items: center;"></p>
        y:
        <p id="y-vel" style="justify-items: center;"></p>
        xA:
        <p id="x-velA" style="justify-items: center;"></p>
        yA:
        <p id="y-velA" style="justify-items: center;"></p>
    </div>
    <script src="./vector.js"></script>
    <script src="./joystick.js"></script>
    <script src="./main.js"></script>
</body>
</html>